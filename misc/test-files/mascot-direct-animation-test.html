<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mascot Animation Direct Test</title>
    <style>
        /* DIRECT CSS TEST - No external stylesheets */
        body {
            margin: 0;
            padding: 20px;
            font-family: monospace;
            background: #f0f0f0;
        }
        
        /* Mascot Base Styles */
        .character-mascot {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 64px;
            height: 64px;
            z-index: 1000;
            pointer-events: none;
            border: 2px solid red; /* Debug border */
        }
        
        .mascot-container {
            position: absolute;
            width: 64px;
            height: 64px;
            bottom: 0;
            left: 0;
            border: 2px solid blue; /* Debug border */
        }
        
        .mascot-character {
            position: absolute;
            width: 64px;
            height: 64px;
            bottom: 0;
            left: 0;
            border: 2px solid green; /* Debug border */
        }
        
        /* Simple body parts for testing */
        .mascot-head {
            position: absolute;
            width: 24px;
            height: 18px;
            bottom: 36px;
            left: 20px;
            background: #FDBCB4;
            border-radius: 5px;
            z-index: 10;
        }
        
        .mascot-body {
            position: absolute;
            width: 20px;
            height: 24px;
            bottom: 12px;
            left: 22px;
            background: #333333;
            border-radius: 2px;
            z-index: 8;
        }
        
        /* Test animations */
        .mascot-idle .mascot-container {
            animation: idle-breathing 2s ease-in-out infinite;
            border-color: orange !important; /* Should turn orange when idle */
        }
        
        .mascot-excited .mascot-container {
            animation: excited-jump 1s ease-in-out infinite;
            border-color: yellow !important; /* Should turn yellow when excited */
        }
        
        .mascot-dancing .mascot-container {
            animation: dancing-move 0.8s ease-in-out infinite;
            border-color: purple !important; /* Should turn purple when dancing */
        }
        
        @keyframes idle-breathing {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-2px); }
        }
        
        @keyframes excited-jump {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-8px) scale(1.05); }
        }
        
        @keyframes dancing-move {
            0%, 100% { transform: translateX(0) rotate(0deg); }
            25% { transform: translateX(-3px) rotate(-5deg); }
            75% { transform: translateX(3px) rotate(5deg); }
        }
        
        .debug-panel {
            position: fixed;
            top: 20px;
            left: 20px;
            background: white;
            padding: 20px;
            border: 2px solid #333;
            border-radius: 8px;
            z-index: 2000;
            max-width: 400px;
            font-size: 12px;
        }
        
        .debug-btn {
            margin: 5px;
            padding: 8px 12px;
            background: #333;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .debug-btn:hover {
            background: #555;
        }
        
        .info {
            margin: 10px 0;
            padding: 10px;
            background: #f8f8f8;
            border-radius: 4px;
            font-family: monospace;
            font-size: 11px;
        }
    </style>
</head>
<body>
    <div class="debug-panel">
        <h3>üé≠ Direct Mascot Animation Test</h3>
        <p>This test uses direct CSS without external stylesheets to isolate the animation issue.</p>
        
        <div class="info">
            <div>Current Classes: <span id="current-classes">none</span></div>
            <div>Animation Status: <span id="animation-status">checking...</span></div>
        </div>
        
        <div>
            <button class="debug-btn" onclick="setMascotState('idle')">Set Idle</button>
            <button class="debug-btn" onclick="setMascotState('excited')">Set Excited</button>
            <button class="debug-btn" onclick="setMascotState('dancing')">Set Dancing</button>
            <button class="debug-btn" onclick="clearState()">Clear All</button>
        </div>
        
        <div style="margin-top: 10px;">
            <button class="debug-btn" onclick="inspectElement()">Inspect Element</button>
            <button class="debug-btn" onclick="checkAnimations()">Check Animations</button>
        </div>
        
        <div id="log" style="margin-top: 10px; max-height: 200px; overflow-y: auto; font-size: 10px;"></div>
    </div>

    <!-- Manual mascot HTML structure -->
    <div class="character-mascot" id="test-mascot">
        <div class="mascot-container">
            <div class="mascot-character">
                <div class="mascot-head"></div>
                <div class="mascot-body"></div>
            </div>
        </div>
    </div>

    <script>
        const mascotElement = document.getElementById('test-mascot');
        let currentState = '';
        
        function log(message) {
            const logEl = document.getElementById('log');
            if (logEl) {
                const timestamp = new Date().toLocaleTimeString();
                logEl.innerHTML += `<div>[${timestamp}] ${message}</div>`;
                logEl.scrollTop = logEl.scrollHeight;
            }
            console.log(message);
        }
        
        function setMascotState(state) {
            if (!mascotElement) {
                log('‚ùå Mascot element not found');
                return;
            }
            
            // Remove all state classes
            mascotElement.classList.remove('mascot-idle', 'mascot-excited', 'mascot-dancing');
            
            // Add new state class
            const className = `mascot-${state}`;
            mascotElement.classList.add(className);
            currentState = state;
            
            log(`üé≠ Set state to: ${state}`);
            log(`üé® Added class: ${className}`);
            log(`üìã All classes: ${mascotElement.className}`);
            
            updateDisplay();
        }
        
        function clearState() {
            if (!mascotElement) return;
            
            mascotElement.classList.remove('mascot-idle', 'mascot-excited', 'mascot-dancing');
            currentState = '';
            
            log('üßπ Cleared all state classes');
            updateDisplay();
        }
        
        function inspectElement() {
            if (!mascotElement) {
                log('‚ùå Mascot element not found');
                return;
            }
            
            log('üîç Element inspection:');
            log(`  - tagName: ${mascotElement.tagName}`);
            log(`  - className: "${mascotElement.className}"`);
            log(`  - classList: [${[...mascotElement.classList].join(', ')}]`);
            log(`  - children: ${mascotElement.children.length}`);
            
            const container = mascotElement.querySelector('.mascot-container');
            if (container) {
                log(`  - container found: ${container.tagName}`);
                log(`  - container classes: "${container.className}"`);
                
                const computedStyle = getComputedStyle(container);
                log(`  - container animation: "${computedStyle.animation}"`);
                log(`  - container transform: "${computedStyle.transform}"`);
            } else {
                log('  - ‚ùå .mascot-container not found');
            }
        }
        
        function checkAnimations() {
            if (!mascotElement) return;
            
            const container = mascotElement.querySelector('.mascot-container');
            if (!container) {
                log('‚ùå Container not found for animation check');
                return;
            }
            
            const computedStyle = getComputedStyle(container);
            log('üé¨ Animation check:');
            log(`  - animation-name: "${computedStyle.animationName}"`);
            log(`  - animation-duration: "${computedStyle.animationDuration}"`);
            log(`  - animation-iteration-count: "${computedStyle.animationIterationCount}"`);
            log(`  - animation-play-state: "${computedStyle.animationPlayState}"`);
            log(`  - transform: "${computedStyle.transform}"`);
            
            // Check if prefers-reduced-motion is affecting animations
            const reducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
            log(`  - prefers-reduced-motion: ${reducedMotion}`);
        }
        
        function updateDisplay() {
            const classesEl = document.getElementById('current-classes');
            const statusEl = document.getElementById('animation-status');
            
            if (classesEl) {
                classesEl.textContent = mascotElement ? mascotElement.className : 'element not found';
            }
            
            if (statusEl) {
                const container = mascotElement?.querySelector('.mascot-container');
                if (container) {
                    const computedStyle = getComputedStyle(container);
                    const animationName = computedStyle.animationName;
                    statusEl.textContent = animationName !== 'none' ? `Active: ${animationName}` : 'No animation';
                } else {
                    statusEl.textContent = 'Container not found';
                }
            }
        }
        
        // Initialize
        window.addEventListener('DOMContentLoaded', () => {
            log('‚úÖ Direct test initialized');
            log('üé≠ Testing basic mascot animations with direct CSS');
            updateDisplay();
        });
        
        // Auto-update display every 2 seconds
        setInterval(updateDisplay, 2000);
    </script>
</body>
</html>
