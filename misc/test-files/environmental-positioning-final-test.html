<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Environmental Positioning Final Test</title>
    <link rel="stylesheet" href="../../css/main.css">
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: system-ui, -apple-system, sans-serif;
            background: white;
            min-height: 100vh;
            /* Add visible guides to check for overflow */
            border: 3px solid red;
            box-sizing: border-box;
        }
        
        .test-section {
            margin-bottom: 40px;
            padding: 20px;
            border: 1px solid #ccc;
            background: #f9f9f9;
        }
        
        .test-button {
            margin: 10px;
            padding: 10px 20px;
            background: #333;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 4px;
        }
        
        .test-button:hover {
            background: #555;
        }
        
        .overflow-check {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            border: 2px solid blue;
            box-sizing: border-box;
            z-index: 2000;
        }
        
        .bounds-info {
            position: fixed;
            top: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 10px;
            border-radius: 4px;
            font-size: 12px;
            z-index: 2001;
        }
    </style>
</head>
<body>
    <div class="overflow-check"></div>
    <div class="bounds-info">
        <div>Viewport: <span id="viewport-size"></span></div>
        <div>Mascot: <span id="mascot-position"></span></div>
        <div>Scrollbars: <span id="scrollbar-check"></span></div>
    </div>

    <div class="test-section">
        <h2>Environmental Positioning Final Test</h2>
        <p>This test verifies that all environmental elements stay within bounds and don't cause scrollbars.</p>
        
        <h3>Test States:</h3>
        <button class="test-button" onclick="testState('thinking')">Thinking (Bubble + Icons)</button>
        <button class="test-button" onclick="testState('coffee')">Coffee (Cup + Steam)</button>
        <button class="test-button" onclick="testState('sleepy')">Sleepy (Moon + ZZZ)</button>
        <button class="test-button" onclick="testState('creating')">Creating (Tools + Colors)</button>
        <button class="test-button" onclick="testState('excited')">Excited (Confetti + Star)</button>
        <button class="test-button" onclick="testState('dancing')">Dancing (Notes + Rhythm)</button>
        <button class="test-button" onclick="testState('idle')">Idle (Reset)</button>
        
        <h3>Visual Checks:</h3>
        <ul>
            <li>âœ“ Thought bubble should be visible above mascot head with strong drop shadow</li>
            <li>âœ“ Question mark and lightbulb should be INSIDE the thought bubble</li>
            <li>âœ“ All elements should stay within the blue viewport border</li>
            <li>âœ“ No horizontal or vertical scrollbars should appear</li>
            <li>âœ“ Environmental elements should be contextually positioned (bubble above head, coffee near arm, etc.)</li>
        </ul>
        
        <h3>Responsive Test:</h3>
        <p>Resize the browser window to test mobile breakpoints (640px and 440px).</p>
    </div>

    <!-- Mascot Elements -->
    <div class="mascot" id="mascot">
        <div class="mascot-body">
            <div class="mascot-head">
                <div class="mascot-hair"></div>
                <div class="mascot-face">
                    <div class="mascot-eyes">
                        <div class="mascot-eye left"></div>
                        <div class="mascot-eye right"></div>
                    </div>
                    <div class="mascot-beard"></div>
                </div>
            </div>
            <div class="mascot-torso">
                <div class="mascot-arms">
                    <div class="mascot-arm left"></div>
                    <div class="mascot-arm right"></div>
                </div>
            </div>
            <div class="mascot-legs">
                <div class="mascot-leg left"></div>
                <div class="mascot-leg right"></div>
            </div>
        </div>
    </div>

    <!-- Environmental Elements Container -->
    <div class="mascot-environment" id="mascot-environment">
        <!-- Creating State -->
        <div class="env-creating">
            <div class="env-element color-dot"></div>
            <div class="env-element color-dot-2"></div>
            <div class="env-element design-tool"></div>
            <div class="env-element font-aa">Aa</div>
            <div class="env-element font-serif"></div>
        </div>
        
        <!-- Thinking State -->
        <div class="env-thinking">
            <div class="env-element thought-bubble"></div>
            <div class="env-element question-mark">?</div>
            <div class="env-element lightbulb">ðŸ’¡</div>
        </div>
        
        <!-- Coffee State -->
        <div class="env-coffee">
            <div class="env-element coffee-cup">â˜•</div>
            <div class="env-element steam"></div>
            <div class="env-element steam-2"></div>
            <div class="env-element steam-3"></div>
        </div>
        
        <!-- Sleepy State -->
        <div class="env-sleepy">
            <div class="env-element moon">ðŸŒ™</div>
            <div class="env-element zzz">Z</div>
            <div class="env-element zzz zzz-2">Z</div>
            <div class="env-element zzz zzz-3">Z</div>
        </div>
        
        <!-- Excited State -->
        <div class="env-excited">
            <div class="env-element confetti confetti-1"></div>
            <div class="env-element confetti confetti-2"></div>
            <div class="env-element confetti confetti-3"></div>
            <div class="env-element confetti confetti-4"></div>
            <div class="env-element star">âœ¨</div>
        </div>
        
        <!-- Dancing State -->
        <div class="env-dancing">
            <div class="env-element music-note note-1">â™ª</div>
            <div class="env-element music-note note-2">â™«</div>
            <div class="env-element music-note note-3">â™ª</div>
            <div class="env-element rhythm-circle rhythm-1"></div>
            <div class="env-element rhythm-circle rhythm-2"></div>
        </div>
    </div>

    <script>
        // Test state management
        function testState(state) {
            const mascotEnv = document.getElementById('mascot-environment');
            const mascot = document.getElementById('mascot');
            
            // Clear all states
            mascotEnv.className = 'mascot-environment';
            mascot.className = 'mascot';
            
            // Set new state
            if (state !== 'idle') {
                mascotEnv.classList.add('state-' + state);
                mascot.classList.add('state-' + state);
            }
            
            // Update display info
            updateDisplayInfo();
        }
        
        function updateDisplayInfo() {
            const viewport = document.getElementById('viewport-size');
            const mascotPos = document.getElementById('mascot-position');
            const scrollbarCheck = document.getElementById('scrollbar-check');
            
            // Viewport size
            viewport.textContent = `${window.innerWidth}x${window.innerHeight}`;
            
            // Mascot position
            const mascot = document.getElementById('mascot');
            const rect = mascot.getBoundingClientRect();
            mascotPos.textContent = `${Math.round(rect.right)}px from right, ${Math.round(window.innerHeight - rect.bottom)}px from bottom`;
            
            // Scrollbar check
            const hasHorizontalScroll = document.body.scrollWidth > window.innerWidth;
            const hasVerticalScroll = document.body.scrollHeight > window.innerHeight;
            scrollbarCheck.textContent = hasHorizontalScroll || hasVerticalScroll ? 
                `SCROLLBARS DETECTED! H:${hasHorizontalScroll} V:${hasVerticalScroll}` : 
                'No scrollbars âœ“';
            scrollbarCheck.style.color = hasHorizontalScroll || hasVerticalScroll ? 'red' : 'lightgreen';
        }
        
        // Update info on load and resize
        window.addEventListener('load', updateDisplayInfo);
        window.addEventListener('resize', updateDisplayInfo);
        
        // Test thinking state by default
        setTimeout(() => testState('thinking'), 500);
    </script>
</body>
</html>
